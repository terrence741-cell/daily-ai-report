name: 梦想屋AI日报自动发送                                                                 
                                                                                             
  on:                                                                                        
    schedule:                                                                                
      - cron: '0 13 * * *'                                                                   
    workflow_dispatch:                                                                       
                                                                                             
  jobs:                                                                                      
    send-daily-report:                                                                       
      runs-on: ubuntu-latest                                                                 
      steps:                                                                                 
        - name: 检出代码                                                                     
          uses: actions/checkout@v3                                                          
                                                                                             
        - name: 设置 Python 环境                                                             
          uses: actions/setup-python@v4                                                      
          with:                                                                              
            python-version: '3.10'                                                           
                                                                                             
        - name: 安装依赖                                                                     
          run: |                                                                             
            python -m pip install requests beautifulsoup4                                    
                                                                                             
        - name: 运行日报生成脚本                                                             
          env:                                                                               
            SMTP_HOST: ${{ secrets.SMTP_HOST }}                                              
            SMTP_PORT: ${{ secrets.SMTP_PORT }}                                              
            SMTP_USER: ${{ secrets.SMTP_USER }}                                              
            SMTP_PASS: ${{ secrets.SMTP_PASS }}                                              
            TO_EMAIL: ${{ secrets.TO_EMAIL }}                                                
            FROM_EMAIL: ${{ secrets.FROM_EMAIL }}                                            
          run: |                                                                             
            python generate_report.py 
